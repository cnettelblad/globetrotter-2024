import{d as A,l as F,p as H,o as v,g as k,b as o,t as S,F as $,c as C,w as u,a as c,u as y,P as z,e as _,k as T,q as P,h as q,s as G,i as R,m as U,j as O,x as Y,y as Z}from"./app-l4YdmmWh.js";import{_ as J}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-BYlS9Y78.js";import{t as E}from"./toast-DVis8ArQ.js";import{_ as K,T as I,a as Q,b as M,c as W,d as X}from"./TableActions.vue_vue_type_script_setup_true_lang-6na3BYiH.js";import{_ as ee}from"./ContestantCell.vue_vue_type_script_setup_true_lang-DY4de5K3.js";import{G as te}from"./GradientButton-B4oI_Idf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const se={class:"flex overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"},ne={class:"relative p-4 w-full max-w-md max-h-full"},oe={class:"relative bg-white rounded-lg shadow"},le={class:"p-4 md:p-5 text-center"},re={class:"mb-5 text-lg font-normal text-gray-500"},ae=A({__name:"ContestantDeletionModal",props:{contestant:{}},emits:["close"],setup(r,{emit:t}){const s=r,e=t,n=()=>{e("close"),E.addToast(`Contestant ${s.contestant.username} removed`)},l=()=>{e("close")},a=d=>{d.key==="Escape"&&l()};return F(()=>document.addEventListener("keydown",a)),H(()=>document.removeEventListener("keydown",a)),(d,i)=>(v(),k($,null,[o("div",se,[o("div",ne,[o("div",oe,[o("button",{onClick:l,type:"button",class:"absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center","data-modal-hide":"popup-modal"},i[0]||(i[0]=[o("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1)])),o("div",le,[i[1]||(i[1]=o("svg",{class:"mx-auto mb-4 text-gray-400 w-12 h-12","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1)),o("h3",re," Are you sure you want to delete "+S(d.contestant.username)+"? ",1),o("button",{onClick:n,type:"button",class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center"}," Yes, delete "),o("button",{onClick:l,type:"button",class:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100"}," No, cancel ")])])])]),i[2]||(i[2]=o("div",{class:"bg-gray-900/50 fixed inset-0 z-40"},null,-1))],64))}}),ie={class:"py-1 text-sm text-gray-700"},de={class:"py-1"},ce=A({__name:"ContestantActionsCell",props:{contestant:{}},emits:["delete"],setup(r,{emit:t}){const s=e=>{navigator.clipboard.writeText(e),E.addToast("Copied Discord ID to clipboard")};return(e,n)=>(v(),C(I,{class:"flex justify-end"},{default:u(()=>[c(K,null,{default:u(()=>[o("ul",ie,[o("li",null,[c(y(z),{href:e.route("contestants.edit",e.contestant.id),class:"block py-2 px-4 hover:bg-gray-100"},{default:u(()=>n[2]||(n[2]=[_(" Edit ")])),_:1},8,["href"])]),o("li",null,[o("button",{onClick:n[0]||(n[0]=l=>s(e.contestant.discord_id.toString())),class:"block py-2 px-4 w-full text-left hover:bg-gray-100"}," Copy Discord ID ")])]),o("div",de,[o("button",{onClick:n[1]||(n[1]=l=>e.$emit("delete",e.contestant)),class:"block py-2 px-4 w-full text-left text-red-500 hover:bg-gray-100"}," Delete ")])]),_:1})]),_:1}))}}),ue={class:"overflow-x-auto"},me=A({__name:"ContestantTable",props:{contestants:{}},setup(r){const t=T(null);return(s,e)=>(v(),k($,null,[o("div",ue,[c(X,null,{header:u(()=>[c(Q,null,{default:u(()=>[c(M,null,{default:u(()=>e[1]||(e[1]=[_("Contestant")])),_:1}),c(M,null,{default:u(()=>e[2]||(e[2]=[_("Submissions")])),_:1}),c(M,null,{default:u(()=>e[3]||(e[3]=[o("span",{class:"sr-only"},"Actions",-1)])),_:1})]),_:1})]),default:u(()=>[(v(!0),k($,null,P(s.contestants,n=>(v(),C(W,{key:n.id,class:"border-b border-gray-200"},{default:u(()=>[c(ee,{contestant:n},null,8,["contestant"]),c(I,null,{default:u(()=>[_(S(n.score),1)]),_:2},1024),c(ce,{contestant:n,onDelete:l=>t.value=n},null,8,["contestant","onDelete"])]),_:2},1024))),128))]),_:1})]),(v(),C(G,{to:"body"},[t.value?(v(),C(ae,{key:0,contestant:t.value,onClose:e[0]||(e[0]=n=>t.value=null)},null,8,["contestant"])):q("",!0)]))],64))}});function D(r,t){if(r===t)return 0;if(r.length>t.length){const N=r;r=t,t=N}let s=r.length,e=t.length;for(;s>0&&r.charCodeAt(s-1)===t.charCodeAt(e-1);)s--,e--;let n=0;for(;n<s&&r.charCodeAt(n)===t.charCodeAt(n);)n++;if(s-=n,e-=n,s===0||e<3)return e;let l=0,a,d,i,f,g,m=0,p,x,b,B,V,j;const h=[];for(a=0;a<s;a++)h.push(a+1),h.push(r.charCodeAt(n+a));const L=h.length-1;for(;l<e-3;)for(b=t.charCodeAt(n+(d=l)),B=t.charCodeAt(n+(i=l+1)),V=t.charCodeAt(n+(f=l+2)),j=t.charCodeAt(n+(g=l+3)),m=l+=4,a=0;a<L;a+=2)p=h[a],x=h[a+1],d=w(p,d,i,b,x),i=w(d,i,f,B,x),f=w(i,f,g,V,x),m=w(f,g,m,j,x),h[a]=m,g=f,f=i,i=d,d=p;for(;l<e;)for(b=t.charCodeAt(n+(d=l)),m=++l,a=0;a<L;a+=2)p=h[a],h[a]=m=w(p,d,m,b,h[a+1]),d=p;return m}function w(r,t,s,e,n){return r<t||s<t?r>s?s+1:r+1:e===n?t:t+1}const fe=(r="",t=[])=>{const s=T(r),e=T(t),n=R(()=>s.value?e.value.map(l=>he(l,s.value)).filter(Boolean).sort(pe).map(l=>l==null?void 0:l.contestant):e.value);return{filter:s,contestants:e,filteredContestants:n}},pe=(r,t)=>{if(!r||!t)return 0;let s=0,e=0;return r.matches.nickname!==null?s=r.matches.nickname:r.matches.username!==null?s=r.matches.username+2:r.matches.discord_id!==null&&(s=r.matches.discord_id+5),t.matches.nickname!==null?e=t.matches.nickname:t.matches.username!==null?e=t.matches.username+2:t.matches.discord_id!==null&&(e=t.matches.discord_id+5),s===e?0:s>e?1:-1},he=(r,t)=>{var p;const s=t.toLowerCase(),e=(p=r.nickname)==null?void 0:p.toLowerCase(),n=r.username.toLowerCase(),l=r.discord_id.toString(),a=e==null?void 0:e.includes(s),d=n.includes(s),i=l.includes(s);if(!a&&!d&&!i)return;const f=e&&a?D(e,s):null,g=n&&d?D(n,s):null,m=l&&i?D(l,s):null;return{matches:{nickname:f,username:g,discord_id:m},contestant:r}},ve={class:"py-8"},ge={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},xe={class:"bg-white relative shadow-md sm:rounded-lg overflow-hidden"},we={class:"flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4"},ye={class:"w-full md:w-1/2"},_e={class:"flex items-center"},be={class:"relative w-full"},Ce={class:"w-full md:w-auto flex flex-col md:flex-row space-y-2 md:space-y-0 items-stretch md:items-center justify-end md:space-x-3 flex-shrink-0"},ke={class:"bg-white relative shadow-md sm:rounded-lg overflow-hidden"},je=A({__name:"List",props:{contestants:{}},setup(r){const t=r,{filter:s,filteredContestants:e}=fe("",t.contestants);return(n,l)=>(v(),k($,null,[c(y(U),{title:"Profile"}),c(J,null,{default:u(()=>[o("div",ve,[o("div",ge,[o("section",xe,[o("div",we,[o("div",ye,[o("form",_e,[l[2]||(l[2]=o("label",{for:"simple-search",class:"sr-only"},"Search",-1)),o("div",be,[l[1]||(l[1]=o("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[o("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),O(o("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>Z(s)?s.value=a:null),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2",placeholder:"Search",required:""},null,512),[[Y,y(s)]])])])]),o("div",Ce,[c(y(z),{href:n.route("contestants.create")},{default:u(()=>[c(te,null,{default:u(()=>l[3]||(l[3]=[o("svg",{class:"h-3.5 w-3.5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[o("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"})],-1),_(" Add Contestant ")])),_:1})]),_:1},8,["href"])])])]),o("section",ke,[c(me,{contestants:y(e)},null,8,["contestants"])])])])]),_:1})],64))}});export{je as default};
